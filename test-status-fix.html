<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status Fix Test</title>
    <link rel="stylesheet" href="styles/main.css">
    <style>
        .test-container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-button {
            margin: 5px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-button.primary {
            background: #007bff;
            color: white;
        }
        .test-button.secondary {
            background: #6c757d;
            color: white;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Status Badge Fix Test</h1>
        
        <div class="test-section">
            <h3>Water Reminder Status Test</h3>
            <div class="status-badge inactive" id="water-status-badge">Inactive</div>
            <br><br>
            <button class="test-button primary" id="water-toggle">Start</button>
            <button class="test-button" onclick="testWaterStatus()">Test Status Update</button>
        </div>
        
        <div class="test-section">
            <h3>Standup Reminder Status Test</h3>
            <div class="status-badge inactive" id="standup-status-badge">Inactive</div>
            <br><br>
            <button class="test-button primary" id="standup-toggle">Start</button>
            <button class="test-button" onclick="testStandupStatus()">Test Status Update</button>
        </div>
        
        <div class="test-section">
            <h3>Manual Test Controls</h3>
            <button class="test-button" onclick="setWaterActive()">Set Water Active</button>
            <button class="test-button" onclick="setWaterInactive()">Set Water Inactive</button>
            <button class="test-button" onclick="setStandupActive()">Set Standup Active</button>
            <button class="test-button" onclick="setStandupInactive()">Set Standup Inactive</button>
        </div>
        
        <div class="test-section">
            <h3>Test Log</h3>
            <div id="test-log" style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;"></div>
        </div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }
        
        function setWaterActive() {
            const badge = document.getElementById('water-status-badge');
            const button = document.getElementById('water-toggle');
            
            badge.textContent = 'Active';
            badge.classList.remove('inactive');
            badge.classList.add('active');
            
            button.textContent = 'Pause';
            button.className = 'test-button secondary';
            
            log('Water set to Active');
        }
        
        function setWaterInactive() {
            const badge = document.getElementById('water-status-badge');
            const button = document.getElementById('water-toggle');
            
            badge.textContent = 'Inactive';
            badge.classList.remove('active');
            badge.classList.add('inactive');
            
            button.textContent = 'Start';
            button.className = 'test-button primary';
            
            log('Water set to Inactive');
        }
        
        function setStandupActive() {
            const badge = document.getElementById('standup-status-badge');
            const button = document.getElementById('standup-toggle');
            
            badge.textContent = 'Active';
            badge.classList.remove('inactive');
            badge.classList.add('active');
            
            button.textContent = 'Pause';
            button.className = 'test-button secondary';
            
            log('Standup set to Active');
        }
        
        function setStandupInactive() {
            const badge = document.getElementById('standup-status-badge');
            const button = document.getElementById('standup-toggle');
            
            badge.textContent = 'Inactive';
            badge.classList.remove('active');
            badge.classList.add('inactive');
            
            button.textContent = 'Start';
            button.className = 'test-button primary';
            
            log('Standup set to Inactive');
        }
        
        function testWaterStatus() {
            const badge = document.getElementById('water-status-badge');
            const button = document.getElementById('water-toggle');
            const isActive = button.textContent.trim() === 'Start';
            
            if (isActive) {
                setWaterActive();
            } else {
                setWaterInactive();
            }
        }
        
        function testStandupStatus() {
            const badge = document.getElementById('standup-status-badge');
            const button = document.getElementById('standup-toggle');
            const isActive = button.textContent.trim() === 'Start';
            
            if (isActive) {
                setStandupActive();
            } else {
                setStandupInactive();
            }
        }
        
        // 绑定按钮事件
        document.addEventListener('DOMContentLoaded', () => {
            log('Test page loaded');
            
            document.getElementById('water-toggle').addEventListener('click', () => {
                log('Water toggle clicked');
                testWaterStatus();
            });
            
            document.getElementById('standup-toggle').addEventListener('click', () => {
                log('Standup toggle clicked');
                testStandupStatus();
            });
        });
    </script>
</body>
</html>