class WaterReminder extends ReminderManager{constructor(t,i){super("water",t,i),this.dailyWaterCount=0,this.dailyGoal=8,this.lastDrinkTime=null,this.drinkHistory=[],this.loadDailyData(),console.log("å–æ°´æé†’å™¨å·²åˆ›å»º")}loadDailyData(){try{const t=(new Date).toDateString(),i=localStorage.getItem("waterReminder_dailyData");if(i){const a=JSON.parse(i);a.date===t?(this.dailyWaterCount=a.count||0,this.drinkHistory=a.history||[],this.lastDrinkTime=a.lastDrinkTime||null):this.resetDailyData()}}catch(t){console.warn("åŠ è½½ä»Šæ—¥å–æ°´æ•°æ®å¤±è´¥:",t),this.resetDailyData()}}saveDailyData(){try{const t={date:(new Date).toDateString(),count:this.dailyWaterCount,history:this.drinkHistory,lastDrinkTime:this.lastDrinkTime};localStorage.setItem("waterReminder_dailyData",JSON.stringify(t))}catch(t){console.warn("ä¿å­˜ä»Šæ—¥å–æ°´æ•°æ®å¤±è´¥:",t)}}resetDailyData(){this.dailyWaterCount=0,this.drinkHistory=[],this.lastDrinkTime=null,this.saveDailyData()}confirmDrink(t=250){const i=Date.now();this.dailyWaterCount++,this.lastDrinkTime=i,this.drinkHistory.push({time:i,amount:t}),this.settings.lastReminder=i,this.saveDailyData(),this.reset(),this.showDrinkConfirmation(),this.triggerStatusChange({status:"drink-confirmed",isActive:!0,isPaused:!1,timeRemaining:this.timeRemaining,dailyCount:this.dailyWaterCount,dailyGoal:this.dailyGoal,lastDrinkTime:this.lastDrinkTime}),console.log(`å·²ç¡®è®¤å–æ°´ï¼Œä»Šæ—¥ç¬¬${this.dailyWaterCount}æ¯`)}showDrinkConfirmation(){const t=Math.min(this.dailyWaterCount/this.dailyGoal,1),i=Math.round(100*t);let a=`å¾ˆå¥½ï¼ä»Šæ—¥å·²å–æ°´ ${this.dailyWaterCount} æ¯`;this.dailyWaterCount>=this.dailyGoal?a+="\nðŸŽ‰ æ­å–œï¼æ‚¨å·²å®Œæˆä»Šæ—¥å–æ°´ç›®æ ‡ï¼":a+=`\nè¿˜éœ€ ${this.dailyGoal-this.dailyWaterCount} æ¯å³å¯å®Œæˆä»Šæ—¥ç›®æ ‡ (${i}%)`,this.notificationService.showInPageAlert("success",{title:"ðŸ’§ å–æ°´ç¡®è®¤",message:a,duration:3e3}),this.dailyWaterCount===this.dailyGoal&&setTimeout(()=>{this.notificationService.showInPageAlert("celebration",{title:"ðŸŽ‰ ç›®æ ‡è¾¾æˆï¼",message:"æ­å–œæ‚¨å®Œæˆä»Šæ—¥å–æ°´ç›®æ ‡ï¼ä¿æŒè‰¯å¥½çš„ä¹ æƒ¯ï¼",duration:5e3})},1e3)}triggerReminder(){if(!this.isActive)return;let t="é•¿æ—¶é—´å·¥ä½œå®¹æ˜“è„±æ°´ï¼Œè®°å¾—è¡¥å……æ°´åˆ†å“¦ï¼";if(this.dailyWaterCount>0){const i=Math.max(0,this.dailyGoal-this.dailyWaterCount);i>0?t+=`\nä»Šæ—¥å·²å– ${this.dailyWaterCount} æ¯ï¼Œè¿˜éœ€ ${i} æ¯å®Œæˆç›®æ ‡`:t="ç»§ç»­ä¿æŒè‰¯å¥½çš„å–æ°´ä¹ æƒ¯ï¼"}this.notificationService.showNotification("water","ðŸ’§ å–æ°´æ—¶é—´åˆ°äº†ï¼",t,()=>this.confirmDrink(),()=>this.snooze(),{actions:[{action:"drink",title:"å·²å–æ°´",icon:"ðŸ’§"},{action:"snooze",title:"5åˆ†é’ŸåŽæé†’",icon:"â°"}]}),this.triggerStatusChange({status:"triggered",isActive:!0,isPaused:!1,timeRemaining:0,dailyCount:this.dailyWaterCount,dailyGoal:this.dailyGoal}),setTimeout(()=>{this.isActive&&0===this.timeRemaining&&this.reset()},6e4),console.log("å–æ°´æé†’å·²è§¦å‘")}getDailyStats(){const t=this.drinkHistory.reduce((t,i)=>t+i.amount,0),i=Math.min(this.dailyWaterCount/this.dailyGoal,1);return{count:this.dailyWaterCount,goal:this.dailyGoal,progress:i,progressPercent:Math.round(100*i),totalAmount:t,lastDrinkTime:this.lastDrinkTime,history:[...this.drinkHistory],isGoalReached:this.dailyWaterCount>=this.dailyGoal}}setDailyGoal(t){t>0&&t<=20?(this.dailyGoal=t,this.saveDailyData(),console.log(`æ¯æ—¥å–æ°´ç›®æ ‡å·²è®¾ç½®ä¸º ${t} æ¯`)):console.warn("æ¯æ—¥ç›®æ ‡åº”åœ¨1-20æ¯ä¹‹é—´")}getDrinkingSuggestion(){const t=(new Date).getHours(),i=this.dailyWaterCount/this.dailyGoal;return t<9?"æ—©æ™¨èµ·åºŠåŽå–ä¸€æ¯æ¸©æ°´ï¼Œæœ‰åŠ©äºŽå”¤é†’èº«ä½“æœºèƒ½":t<12?i<.3?"ä¸Šåˆå·¥ä½œæ—¶é—´ï¼Œè®°å¾—å¤šè¡¥å……æ°´åˆ†ä¿æŒç²¾åŠ›å……æ²›":"ä¸Šåˆçš„å–æ°´é‡ä¸é”™ï¼Œç»§ç»­ä¿æŒï¼":t<14?"åˆé¤æ—¶é—´ï¼Œé€‚é‡é¥®æ°´æœ‰åŠ©äºŽæ¶ˆåŒ–":t<18?i<.6?"ä¸‹åˆå®¹æ˜“ç–²åŠ³ï¼Œå¤šå–æ°´æœ‰åŠ©äºŽä¿æŒæ³¨æ„åŠ›":"ä¸‹åˆçš„æ°´åˆ†è¡¥å……å¾ˆåŠæ—¶ï¼":t<20?i<.8?"æ™šé¤å‰é€‚é‡è¡¥æ°´ï¼Œä½†ä¸è¦è¿‡é‡å½±å“é£Ÿæ¬²":"ä»Šæ—¥å–æ°´é‡å¾ˆæ£’ï¼Œæ™šä¸Šé€‚é‡å³å¯":"ç¡å‰1-2å°æ—¶å‡å°‘é¥®æ°´ï¼Œé¿å…å½±å“ç¡çœ è´¨é‡"}getCurrentStatus(){return{...super.getCurrentStatus(),dailyStats:this.getDailyStats(),suggestion:this.getDrinkingSuggestion()}}reset(){super.reset();const t=(new Date).toDateString(),i=localStorage.getItem("waterReminder_dailyData");if(i)try{JSON.parse(i).date!==t&&this.resetDailyData()}catch(t){console.warn("æ£€æŸ¥æ—¥æœŸæ•°æ®å¤±è´¥:",t)}}destroy(){this.saveDailyData(),super.destroy(),console.log("å–æ°´æé†’å™¨å·²é”€æ¯")}}"undefined"!=typeof module&&module.exports&&(module.exports=WaterReminder);